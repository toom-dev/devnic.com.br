import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n,a as v}from"./index.CFXLh_av.js";const y=({isOpen:a,onClose:r,service:i})=>{const[t,o]=n.useState({nome:"",email:"",telefone:""}),[d,l]=n.useState(!1),[b,c]=n.useState(!1),[f,h]=n.useState(""),g=async p=>{p.preventDefault(),l(!0),h("");try{const s="https://devnic-controller.vercel.app/";if(s)try{if((await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nome:t.nome,email:t.email,telefone:t.telefone})})).ok){c(!0),setTimeout(()=>{o({nome:"",email:"",telefone:""}),c(!1),r()},2e3);return}}catch{const m=await fetch("https://devnic-controller.vercel.app/mail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!m.ok){const j=await m.json();throw new Error(j.error||"Erro ao enviar formulário")}}c(!0),setTimeout(()=>{o({nome:"",email:"",telefone:""}),c(!1),r()},2e3)}catch(s){console.error("Erro ao enviar formulário:",s),h("Erro ao enviar formulário. Tente novamente.")}finally{l(!1)}},u=p=>{const{name:s,value:x}=p.target;o(m=>({...m,[s]:x}))};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 relative",children:[e.jsx("button",{onClick:r,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Formulário Enviado!"}),e.jsx("p",{className:"text-gray-600",children:"Entraremos em contato em breve."})]}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Solicitar Orçamento Gratuito"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{type:"text",id:"nome",name:"nome",required:!0,value:t.nome,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Seu nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail *"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:t.email,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"seu@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"telefone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsx("input",{type:"tel",id:"telefone",name:"telefone",required:!0,value:t.telefone,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 99999-9999"})]}),f&&e.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:f}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white py-3 px-4 rounded-lg font-semibold transition-colors",children:d?"Enviando...":"Enviar Solicitação"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Entraremos em contato em até 24 horas • Consulta 100% gratuita"})]})]})}):null},N=()=>{const[a,r]=n.useState(!1),[i,t]=n.useState("Diagnóstico Geral");return{isFormOpen:a,selectedService:i,openForm:l=>{l&&t(l),r(!0)},closeForm:()=>{r(!1)}}},F=({children:a})=>{const{isFormOpen:r,selectedService:i,openForm:t,closeForm:o}=N();return v.useEffect(()=>{window.openContactForm=t},[t]),e.jsxs(e.Fragment,{children:[a,e.jsx(y,{isOpen:r,onClose:o,service:i})]})};export{F as PageWrapper};
