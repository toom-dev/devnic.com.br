import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as n,a as v}from"./index.CFXLh_av.js";const j=({isOpen:l,onClose:t,service:s})=>{const[r,a]=n.useState({nome:"",email:"",telefone:"",problema:"",servico:s||"Diagnóstico Geral"}),[d,i]=n.useState(!1),[f,x]=n.useState(!1),[p,b]=n.useState(""),g=async c=>{c.preventDefault(),i(!0),b("");try{const o=await fetch("/api/send-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!o.ok){const u=await o.json();throw new Error(u.error||"Erro ao enviar formulário")}x(!0),setTimeout(()=>{a({nome:"",email:"",telefone:"",problema:"",servico:s||"Diagnóstico Geral"}),x(!1),t()},2e3)}catch(o){console.error("Erro ao salvar lead:",o),b("Erro ao enviar formulário. Tente novamente.")}finally{i(!1)}},m=c=>{const{name:o,value:u}=c.target;a(h=>({...h,[o]:u}))};return l?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6 relative",children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),f?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Formulário Enviado!"}),e.jsx("p",{className:"text-gray-600",children:"Entraremos em contato em breve."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-6",children:["Solicitar ",s==="Diagnóstico Geral"?"Diagnóstico":"Consulta"," Gratuita"]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"nome",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),e.jsx("input",{type:"text",id:"nome",name:"nome",required:!0,value:r.nome,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Seu nome completo"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"E-mail *"}),e.jsx("input",{type:"email",id:"email",name:"email",required:!0,value:r.email,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"seu@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"telefone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone *"}),e.jsx("input",{type:"tel",id:"telefone",name:"telefone",required:!0,value:r.telefone,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"(11) 99999-9999"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"problema",className:"block text-sm font-medium text-gray-700 mb-1",children:"Descreva seu problema ou necessidade *"}),e.jsx("textarea",{id:"problema",name:"problema",required:!0,rows:4,value:r.problema,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",placeholder:"Conte-nos sobre seu desafio atual de TI..."})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"servico",className:"block text-sm font-medium text-gray-700 mb-1",children:"Serviço de Interesse"}),e.jsxs("select",{id:"servico",name:"servico",value:r.servico,onChange:c=>a(o=>({...o,servico:c.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"Diagnóstico Geral",children:"Diagnóstico Geral"}),e.jsx("option",{value:"Transformação Digital",children:"Transformação Digital"}),e.jsx("option",{value:"Infraestrutura & Cloud",children:"Infraestrutura & Cloud"}),e.jsx("option",{value:"Segurança da Informação",children:"Segurança da Informação"}),e.jsx("option",{value:"Otimização de Processos",children:"Otimização de Processos"})]})]}),p&&e.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:p}),e.jsx("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white py-3 px-4 rounded-lg font-semibold transition-colors",children:d?"Enviando...":"Enviar Solicitação"})]}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Entraremos em contato em até 24 horas • Consulta 100% gratuita"})]})]})}):null},y=()=>{const[l,t]=n.useState(!1),[s,r]=n.useState("Diagnóstico Geral");return{isFormOpen:l,selectedService:s,openForm:i=>{i&&r(i),t(!0)},closeForm:()=>{t(!1)}}},w=({children:l})=>{const{isFormOpen:t,selectedService:s,openForm:r,closeForm:a}=y();return v.useEffect(()=>{window.openContactForm=r},[r]),e.jsxs(e.Fragment,{children:[l,e.jsx(j,{isOpen:t,onClose:a,service:s})]})};export{w as PageWrapper};
